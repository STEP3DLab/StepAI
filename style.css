document.getElementById('reg-form').addEventListener('submit', async function(event) {
  event.preventDefault();
  const form = event.target;

  // Читаем и кодируем поля
  const nameValue = encodeURIComponent(form.name.value.trim());
  const contactValue = encodeURIComponent(form.contact.value.trim());

  // Вставьте сюда ваш Web App URL из Apps Script:
  const BASE_URL = 'https://script.google.com/macros/s/AKfycbxpsZGc0PWP7MbSCVvqakKrRwtdLwuCDpP0yC_LhsHiCHc0IJUHtvYmckZObVQIh9AE/exec';

  // Собираем полный URL с GET-параметрами
  const requestUrl = `${BASE_URL}?name=${nameValue}&contact=${contactValue}`;

  try {
    // Делаем простой GET-запрос (таких preflight-запросов не будет)
    const response = await fetch(requestUrl, {
      method: 'GET'
    });

    const result = await response.json();
    if (result.status === 'success') {
      document.getElementById('status-message').textContent = result.message;
      form.name.value = '';
      form.contact.value = '';
    } else {
      document.getElementById('status-message').textContent = 'Ошибка: ' + result.message;
    }
  } catch (err) {
    document.getElementById('status-message').textContent = 'Ошибка при отправке: ' + err.message;
    console.error(err);
  }
});

// (Если вы используете класс .fade-in-up для анимации)
document.addEventListener('DOMContentLoaded', () => {
  const fadeElements = document.querySelectorAll('.fade-in-up');
  fadeElements.forEach(el => el.classList.add('visible'));
});
